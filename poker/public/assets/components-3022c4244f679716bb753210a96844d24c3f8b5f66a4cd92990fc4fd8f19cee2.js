function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var a=e,o=t,s=n;r=!1,null===a&&(a=Function.prototype);var i=Object.getOwnPropertyDescriptor(a,o);if(i!==undefined){if("value"in i)return i.value;var c=i.get;return c===undefined?undefined:c.call(s)}var l=Object.getPrototypeOf(a);if(null===l)return undefined;e=l,t=o,n=s,r=!0,i=l=undefined}},AddChat=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={message:""}}return _inherits(t,e),_createClass(t,[{key:"handleChatChange",value:function(e){this.setState({message:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state.message.trim();t&&(this.props.onChatSubmit({message:t,me:this.props.meid}),this.setState({message:""}))}},{key:"render",value:function(){return React.createElement("div",null,React.createElement("form",{className:"new_chat",role:"form",onSubmit:this.handleSubmit.bind(this)},React.createElement("div",{className:"input-group"},React.createElement("input",{type:"search",className:"form-control input-lg",name:"message",placeholder:"Typing here ...",value:this.state.message,onChange:this.handleChatChange.bind(this),maxLength:"140"}),React.createElement("span",{className:"input-group-btn"},React.createElement("button",{type:"submit",className:"btn btn-default btn-lg"},"Send")))))}}]),t}(React.Component),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var a=e,o=t,s=n;r=!1,null===a&&(a=Function.prototype);var i=Object.getOwnPropertyDescriptor(a,o);if(i!==undefined){if("value"in i)return i.value;var c=i.get;return c===undefined?undefined:c.call(s)}var l=Object.getPrototypeOf(a);if(null===l)return undefined;e=l,t=o,n=s,r=!0,i=l=undefined}},ChatList=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this,t=this.props.chats.map(function(t){return e.renderChat(t)});return React.createElement("div",{className:"well well-lg chat-box"},React.createElement("ul",{className:"chat-list list-group"},t,React.createElement("li",{style:{"float":"left",clear:"both"},ref:function(t){e.messagesEnd=t}})))}},{key:"renderChat",value:function(e){var t="list-group-item "+e.type;return e.user==this.props.mename&&(t+=" me"),React.createElement("li",{className:t,key:e.id},React.createElement("span",{className:"label label-default display-name"},e.user),e.message)}},{key:"scrollToBottom",value:function(){ReactDOM.findDOMNode(this.messagesEnd).scrollIntoView({behavior:"smooth"})}},{key:"componentDidMount",value:function(){this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}}]),t}(React.Component),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var a=e,o=t,s=n;r=!1,null===a&&(a=Function.prototype);var i=Object.getOwnPropertyDescriptor(a,o);if(i!==undefined){if("value"in i)return i.value;var c=i.get;return c===undefined?undefined:c.call(s)}var l=Object.getPrototypeOf(a);if(null===l)return undefined;e=l,t=o,n=s,r=!0,i=l=undefined}},ChatBox=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={chats:[]}}return _inherits(t,e),_createClass(t,[{key:"componentDidMount",value:function(){this.loadChats(),this.setupSubscription()}},{key:"render",value:function(){return React.createElement("div",{className:"col-md-9 col-md-offset-1"},React.createElement(ChatList,{mename:this.props.me.name,chats:this.state.chats}),React.createElement(AddChat,{meid:this.props.me.id,onChatSubmit:this.handleChatSubmit.bind(this)}))}},{key:"loadChats",value:function(){$.ajax({url:"/chats",dataType:"json",cache:!1,success:function(e){this.setState({chats:e.chats})}.bind(this),error:function(){console.error("Cannot load data.")}.bind(this)})}},{key:"handleChatSubmit",value:function(e){App.channel.perform("speak",e)}},{key:"freshChatList",value:function(e){var t=JSON.parse(e),n=$.merge($.merge([],this.state.chats),t.chats);this.setState({chats:n.slice(-100)})}},{key:"setupSubscription",value:function(){me=this.props.me,App.channel=App.cable.subscriptions.create({channel:"ChatChannel"},{connected:function(){var e=this;data={message:"joint",me:me.id},this.perform("speak",data),setTimeout(function(){return e.perform("subscribed")},1e3)},disconnected:function(){data={message:"quit",me:me.id},this.perform("speak",data),this.perform("unsubscribed")},received:function(e){return this.updateChatList(e)},updateChatList:this.freshChatList.bind(this)})}}]),t}(React.Component),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var a=e,o=t,s=n;r=!1,null===a&&(a=Function.prototype);var i=Object.getOwnPropertyDescriptor(a,o);if(i!==undefined){if("value"in i)return i.value;var c=i.get;return c===undefined?undefined:c.call(s)}var l=Object.getPrototypeOf(a);if(null===l)return undefined;e=l,t=o,n=s,r=!0,i=l=undefined}},LoginForm=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={display_name:"",room_id:this.props.room_id}}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return React.createElement("form",{className:"form-signin form-horizontal well",onSubmit:this.handdleJoinIn.bind(this)},React.createElement("fieldset",null,React.createElement("legend",null,"Please Join in")),React.createElement("div",{className:"form-group"},React.createElement("input",{autoFocus:"true",className:"form-control",name:"display_name",placeholder:"Display name..",required:"",type:"text",onChange:this._onChange.bind(this)})),React.createElement("div",{className:"form-group"},React.createElement("input",{className:"form-control",name:"room_id",value:this.state.room_id,placeholder:"Room Id..",required:"",type:"text",onChange:this._onChange.bind(this)})),React.createElement("div",{className:"form-group"},React.createElement("button",{className:"btn btn-lg btn-success btn-block right",type:"submit"},"Join in"),React.createElement("p",{className:"help-block"},React.createElement("span",null,"I am the orgnizer,",React.createElement("em",{className:"btn-link btn",onClick:this.handleTaggleForm.bind(this)},"set up a room"),"."))))}},{key:"_onChange",value:function(e){var t={};t[e.target.name]=$.trim(e.target.value),this.setState(t)}},{key:"handdleJoinIn",value:function(e){e.preventDefault(),console.log("join in room");var t=this.state.display_name,n=this.state.room_id;$.ajax({url:"/usersessions/join_in",type:"POST",data:{user_session:{display_name:t},room_id:n}}).done(function(e){console.log(e),console.log("success"),1==e.code?($("input[name='display_name']").closest("div.form-group").addClass("has-error"),$("input[name='display_name']").attr({title:"Join in Failed..","data-content":e.error_message}).popover("show")):2==e.code?($("input[name='room_id']").closest("div.form-group").addClass("has-error"),$("input[name='room_id']").attr({title:"Join in Failed..","data-content":e.error_message}).popover("show")):window.location.href=e.data.redirect_to}).fail(function(){$("div.form-group").addClass("has-error"),console.log("error")}).always(function(){console.log("complete")})}},{key:"handleTaggleForm",value:function(){this.props.onToggleForm("reg")}}]),t}(React.Component),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var a=e,o=t,s=n;r=!1,null===a&&(a=Function.prototype);var i=Object.getOwnPropertyDescriptor(a,o);if(i!==undefined){if("value"in i)return i.value;var c=i.get;return c===undefined?undefined:c.call(s)}var l=Object.getPrototypeOf(a);if(null===l)return undefined;e=l,t=o,n=s,r=!0,i=l=undefined}},RegistrationForm=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={display_name:"",subject:""}}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return React.createElement("form",{className:"form-signin form-horizontal well",role:"form",onSubmit:this.handdleRegstration.bind(this)},React.createElement("fieldset",null,React.createElement("legend",null,"Create a Room")),React.createElement("div",{className:"form-group"},React.createElement("input",{autofocus:"",className:"form-control",name:"display_name",placeholder:"Display name..",required:"",type:"text",onChange:this._onChange.bind(this)})),React.createElement("div",{className:"form-group"},React.createElement("input",{className:"form-control",name:"subject",placeholder:"Room Subject..",required:"",type:"text",onChange:this._onChange.bind(this)})),React.createElement("div",{className:"form-group"}),React.createElement("div",{className:"form-group"},React.createElement("button",{className:"btn btn-lg btn-primary btn-block right",type:"submit"},"Set Up"),React.createElement("p",{className:"help-block"},React.createElement("span",null,"I want join in an exist room,",React.createElement("em",{className:"btn-link btn",onClick:this.handleTaggleForm.bind(this)},"join here"),"."))))}},{key:"_onChange",value:function(e){var t={};t[e.target.name]=$.trim(e.target.value),this.setState(t)}},{key:"handdleRegstration",value:function(e){e.preventDefault(),console.log("create room");var t=this.state.display_name,n=this.state.subject;$.ajax({url:"/usersessions",type:"POST",data:{user_session:{display_name:t},subject:n}}).done(function(e){console.log(e),console.log("success"),1==e.code?($("input[name='display_name']").closest("div.form-group").addClass("has-error"),$("input[name='display_name']").attr({title:"Join in Failed..","data-content":e.error_message}).popover("show")):2==e.code?($("input[name='room_id']").closest("div.form-group").addClass("has-error"),$("input[name='room_id']").attr({title:"Join in Failed..","data-content":e.error_message}).popover("show")):window.location.href=e.data.redirect_to}).fail(function(){console.log("error")}).always(function(){console.log("complete")})}},{key:"handleTaggleForm",value:function(){this.props.onToggleForm("sign")}}]),t}(React.Component),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var a=e,o=t,s=n;r=!1,null===a&&(a=Function.prototype);var i=Object.getOwnPropertyDescriptor(a,o);if(i!==undefined){if("value"in i)return i.value;var c=i.get;return c===undefined?undefined:c.call(s)}var l=Object.getPrototypeOf(a);if(null===l)return undefined;e=l,t=o,n=s,r=!0,i=l=undefined}},PokerRoom=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={attendees:[],current_topic:this.props.subject,statistics_data:this.props.statistics_data.statistics,room_status:this.props.room_status}}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return React.createElement("div",null,React.createElement(PokerTable,{statistics_data:this.state.statistics_data,owner:this.props.owner,attendees:this.state.attendees,room_status:this.state.room_status,onPlayCard:this.handlePlayCard.bind(this),onToggleStatus:this.handleToggleStatus.bind(this)}),React.createElement(AttendeeList,{room_status:this.state.room_status,attendees:this.state.attendees,current_user_id:this.props.current_user,current_user_name:this.props.current_user_name}),React.createElement(SubjectPopup,{current_topic:this.state.current_topic,onSubjectUpdate:this.handleSubjectUpdate.bind(this)}))}},{key:"componentDidMount",value:function(){this.setupSubscription(),$(".room-subject").on("click","button",function(e){e.preventDefault(),$("#subjectPopup").modal("show")})}},{key:"handlePlayCard",value:function(e){App.channel.perform("play",e)}},{key:"handleToggleStatus",value:function(){"finish"==this.state.room_status&&($("#subjectPopup input").val(this.state.current_topic),$("#subjectPopup").modal("show")),App.channel.perform("toggle_status")}},{key:"handleSubjectUpdate",value:function(e){console.log("updating topic"),$("#subjectPopup").modal("hide"),App.channel.perform("update_subject",e)}},{key:"updateSubject",value:function(e){console.log("update Subject"),this.setState({current_topic:e.subject}),$("h1.room-subject span").html(e.subject)}},{key:"loadAttendees",value:function(){$.ajax({url:"/attendees",dataType:"json",cache:!1,success:function(e){this.setState({attendees:e.attendees})}.bind(this),error:function(){console.error("Cannot load data.")}.bind(this)})}},{key:"appendAttendee",value:function(e){console.log("new attendee"),e.attendee&&this.setState({attendees:this.state.attendees.concat([e.attendee])})}},{key:"dropAttendee",value:function(e){console.log("attendee offline"),e.attendee&&this.setState({attendees:this.state.attendees.filter(function(t){return t.id!=e.attendee.id})})}},{key:"updateAttendee",value:function(e){console.log("attendee update"),this.setState({attendees:this.state.attendees.map(function(t){return t.id==e.user_id&&(t.status="online "+e.status),t})})}},{key:"updateChart",value:function(e){console.log("update statistics"),this.setState({statistics_data:e.statistics})}},{key:"newPlay",value:function(e){console.log("play_card"),this.updateAttendee(e.record)}},{key:"updateRoomStatus",value:function(e){console.log("update room status"),this.loadAttendees(),this.setState({room_status:e.status_name}),$('input[name="card_number"]').focus()}},{key:"setupSubscription",value:function(){var e=this.props,t=e.current_room,n=e.current_user;e.room_status;App.channel=App.cable.subscriptions.create({channel:"RoomChannel",room_id:t,user_id:n},{connected:function(){var e=this;setTimeout(function(){return e.perform("subscribed")},888),setTimeout(function(){return e.loadAttendees()},1e3)},disconnected:function(){this.perform("unsubscribed")},received:function(e){switch(result=JSON.parse(e),console.log("receiving .. "),result.action){case"new_attendee":return this.appendAttendee(result);case"drop_attendee":return this.dropAttendee(result);case"play_card":return this.newPlay(result);case"update_status":return this.updateRoomStatus(result);case"statistics":return this.updateChart(result);case"update_subject":return this.updateSubject(result)}},loadAttendees:this.loadAttendees.bind(this),appendAttendee:this.appendAttendee.bind(this),dropAttendee:this.dropAttendee.bind(this),newPlay:this.newPlay.bind(this),updateRoomStatus:this.updateRoomStatus.bind(this),updateChart:this.updateChart.bind(this),updateSubject:this.updateSubject.bind(this)})}}]),t}(React.Component),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var a=e,o=t,s=n;r=!1,null===a&&(a=Function.prototype);var i=Object.getOwnPropertyDescriptor(a,o);if(i!==undefined){if("value"in i)return i.value;var c=i.get;return c===undefined?undefined:c.call(s)}var l=Object.getPrototypeOf(a);if(null===l)return undefined;e=l,t=o,n=s,r=!0,i=l=undefined}},AttendeeList=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={}}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this,t=this.props.attendees.map(function(t){return e.renderAttendee(t)});return React.createElement("div",{className:"col-sm-3 col-sm-offset-1 attendee-list"},React.createElement("h4",null,"AttendeeList"),React.createElement("ol",{className:"attendees-list"},t))}},{key:"renderAttendee",value:function(e){var t=this.cls_name(e),n=this.card_number(e);return React.createElement("li",{className:t,key:e.id},React.createElement("div",{className:"avatar"},React.createElement("img",{src:e.avatar})),e.display_name,n)}},{key:"cls_name",value:function(e){var t=e.status;return e.id==this.props.current_user_id&&(t+=" myself"),t}},{key:"card_number",value:function(e){if("finish"==this.props.room_status)return React.createElement("span",{className:"badge card"},e.number)}}]),t}(React.Component),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var a=e,o=t,s=n;r=!1,null===a&&(a=Function.prototype);var i=Object.getOwnPropertyDescriptor(a,o);if(i!==undefined){if("value"in i)return i.value;var c=i.get;return c===undefined?undefined:c.call(s)}var l=Object.getPrototypeOf(a);if(null===l)return undefined;e=l,t=o,n=s,r=!0,i=l=undefined}},PokerDesktop=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={},this.myChart=undefined}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e={width:400,height:400};return React.createElement("div",{className:"poker-desktop panel panel-default"},React.createElement("div",{className:"panel-body"},React.createElement("canvas",{id:"myChart",style:e})))}},{key:"componentDidMount",value:function(){console.log("render chart.."),this.renderStatistics()}},{key:"componentDidUpdate",value:function(){if("finish"==this.props.room_status){var e=this.props.statistics_data;this.updateChartData(e)}else"ready"==this.props.room_status&&this.myChart.clear().reset()}},{key:"renderStatistics",value:function(){var e=document.getElementById("myChart").getContext("2d");console.log("initial chart"),this.myChart=new Chart(e,{type:"doughnut",options:this.chartOptions()})}},{key:"updateChartData",value:function(e){console.log("update chart.."),this.myChart.data.labels=e.labels,this.myChart.data.datasets=[{label:"# of Cards",data:e.datas,yLabels:[].concat(_toConsumableArray(Array(e.total_count+1).keys())),backgroundColor:e.colors,hoverBackgroundColor:e.colors}],this.myChart.update()}},{key:"chartData",value:function(){var e=this.props.statistics_data;return{labels:e.labels,datasets:[{label:"# of Cards",data:e.datas,yLabels:[].concat(_toConsumableArray(Array(e.total_count+1).keys())),backgroundColor:e.colors,hoverBackgroundColor:e.colors}]}}},{key:"chartOptions",value:function(){return{responsive:!0,maintainAspectRatio:!1,yAxes:[{ticks:{beginAtZero:!0}}]}}}]),t}(React.Component),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var a=e,o=t,s=n;r=!1,null===a&&(a=Function.prototype);var i=Object.getOwnPropertyDescriptor(a,o);if(i!==undefined){if("value"in i)return i.value;var c=i.get;return c===undefined?undefined:c.call(s)}var l=Object.getPrototypeOf(a);if(null===l)return undefined;e=l,t=o,n=s,r=!0,i=l=undefined}},PokerEmitter=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={card_number:""}}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this.renderOwnerButton(),t=this.is_disabled();return React.createElement("div",{className:"col-sm-8 poker-emitter form-inline"},React.createElement("div",{className:"row"},React.createElement("form",{ref:"play_card",onSubmit:this._onSubmit.bind(this)},React.createElement("div",{className:"input-group col-md-8"},React.createElement("span",{className:"input-group-addon"},React.createElement("i",{className:"glyphicon glyphicon-piggy-bank"})),React.createElement("input",{type:"number",name:"card_number",disabled:t,className:"form-control input-lg",placeholder:"Enter Your Number...",onChange:this._onChange.bind(this),value:this.state.card_number}),React.createElement("span",{className:"input-group-btn"},React.createElement("button",{className:"btn btn-default btn-lg",type:"submit"},"Send"))),e)))}},{key:"renderOwnerButton",value:function(){var e=this.button_text(),t="btn btn-info btn-lg "+this.props.room_status;if(this.props.owner)return React.createElement("div",{className:"input-group col-md-2 col-md-offset-1"},React.createElement("button",{className:t,type:"button",onClick:this.handelStart.bind(this)},e))}},{key:"is_disabled",value:function(){return"ready"!=this.props.room_status}},{key:"button_text",value:function(){switch(this.props.room_status){case"open":return"Start Poking";case"ready":return"Draw Result";case"finish":default:return"New Poking"}}},{key:"handleChatChange",value:function(e){this.setState({message:e.target.value})}},{key:"_onChange",value:function(e){var t={};t[e.target.name]=$.trim(e.target.value),this.setState(t)}},{key:"_onSubmit",value:function(e){e.preventDefault(),this.handlePlay(e)}},{key:"handlePlay",value:function(){var e=this.state.card_number.trim();e&&(this.props.onPlayCard({card_number:e}),this.setState({card_number:""}))}},{key:"handelStart",value:function(e){e.preventDefault(),this.props.onToggleStatus()}}]),t}(React.Component),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var a=e,o=t,s=n;r=!1,null===a&&(a=Function.prototype);var i=Object.getOwnPropertyDescriptor(a,o);if(i!==undefined){if("value"in i)return i.value;var c=i.get;return c===undefined?undefined:c.call(s)}var l=Object.getPrototypeOf(a);if(null===l)return undefined;e=l,t=o,n=s,r=!0,i=l=undefined}},PokerTable=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={}}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return React.createElement("div",{className:"col-sm-8 poker-table"},React.createElement(PokerDesktop,{attendees:this.props.attendees,room_status:this.props.room_status,statistics_data:this.props.statistics_data}),React.createElement(PokerEmitter,{owner:this.props.owner,room_status:this.props.room_status,onPlayCard:this.props.onPlayCard,onToggleStatus:this.props.onToggleStatus}))}}]),t}(React.Component),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var a=e,o=t,s=n;r=!1,null===a&&(a=Function.prototype);var i=Object.getOwnPropertyDescriptor(a,o);if(i!==undefined){if("value"in i)return i.value;var c=i.get;return c===undefined?undefined:c.call(s)}var l=Object.getPrototypeOf(a);if(null===l)return undefined;e=l,t=o,n=s,r=!0,i=l=undefined}},SubjectPopup=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={topic:this.props.current_topic}}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return React.createElement("div",{className:"modal fade",id:"subjectPopup",tabIndex:"-1",role:"dialog","aria-labelledby":"subject"},React.createElement("div",{className:"modal-dialog",role:"document"},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-body"},React.createElement("input",{type:"text",className:"form-control",id:"subject",name:"topic",placeholder:"...",autofocus:"autofocus",onChange:this._onChange.bind(this),value:this.state.topic})),React.createElement("div",{className:"modal-footer"},React.createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},"Close"),React.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.handelSave.bind(this)},"Save changes")))))}},{key:"_onChange",value:function(e){var t={};t[e.target.name]=e.target.value,this.setState(t)}},{key:"handelSave",value:function(e){e.preventDefault();this.props.onSubjectUpdate({subject:this.state.topic})}}]),t}(React.Component),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var a=e,o=t,s=n;r=!1,null===a&&(a=Function.prototype);var i=Object.getOwnPropertyDescriptor(a,o);if(i!==undefined){if("value"in i)return i.value;var c=i.get;return c===undefined?undefined:c.call(s)}var l=Object.getPrototypeOf(a);if(null===l)return undefined;e=l,t=o,n=s,r=!0,i=l=undefined}},SignBox=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={form:this.props.action}}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return"sign"==this.state.form?formToRender=React.createElement(LoginForm,{onToggleForm:this.toggleForm.bind(this),room_id:this.props.room_id}):formToRender=React.createElement(RegistrationForm,{onToggleForm:this.toggleForm.bind(this)}),formToRender}},{key:"toggleForm",value:function(e){this.setState({form:e}),this.render()}}]),t}(React.Component);